<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js demo</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>

    <script>
        AFRAME.registerComponent('autoscale', {
            schema: { type: 'number', default: 0.1 },
            init: function () {
                this.scale();
                this.el.addEventListener('object3dset', () => this.scale());
            },
            scale: function () {
                const el = this.el;
                const span = this.data;
                const mesh = el.getObject3D('mesh');

                if (!mesh) return;

                // Compute bounds.
                const bbox = new THREE.Box3().setFromObject(mesh);

                // Normalize scale.
                const scale = span / bbox.getSize().length();
                mesh.scale.set(scale, scale, scale);

                // Recenter.
                const offset = bbox.getCenter().multiplyScalar(scale);
                mesh.position.sub(offset);
            }
        });
    </script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene vr-mode-ui="enabled: false" embedded
        arjs="sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: true;">
        <a-entity gltf-model="./magnemite/scene.gltf" look-at="[gps-camera]" />
        <a-camera gps-camera rotation-reader></a-camera>

    </a-scene>
</body>

</html>